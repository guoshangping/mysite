<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta   http-equiv="Expires"   CONTENT="0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="/static/css/xuanxing/css/font.css">
    <link rel="stylesheet" href="/static/css/xuanxing/css/xadmin.css">
    <script type="text/javascript" src="/static/js/jquery-3.2.1.min.js"></script>
    <script src="/static/layui2/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/static/js/xadmin.js"></script>
    <script src="/static/js/vue.min.js"></script>
    <script src="/static/js/vue-async-data.js"></script>

    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
{#      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>#}
{#      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>#}
    <![endif]-->
        <style type="text/css">
        *{
            margin:0;
            padding:0;
         }

    </style>

<script src="/static/js/echarts.min.js"></script>
</head>
<body>

<div class="x-body">

 <button type="button" class="layui-btn layui-btn-radius layui-btn-sm layui-btn-normal score_button" style="display: inline-block;float: left" id="ess_button">
        厂商文件
    </button>
 <button type="button" class="layui-btn layui-btn-radius layui-btn-sm layui-btn-normal score_button" style="display: inline-block" id="pub_button">
        公共文件
    </button>

{#    <button type="button" class="layui-btn layui-btn-radius score_button" style="display: inline-block" id="ret">#}
{#        直观图#}
{#    </button>#}

    <hr>

{#必要文件页面#}
{#<div id="ess_file"  id="select_prod">#}
<div id="ess_file"  >
    <h1 style="display: inline-block">厂商文件:</h1>
        {% csrf_token %}

        <div class="" id="select_prod" style="display: inline-block">
            <div class="layui-input-inline pro">
                <select id="pro_name" style="height: 35px;" >
{#                    <option>请选择项目</option>#}
{#                    {% for p in pro_obj %}#}
{#                        <option value="pro_name">{{ p.project_name }}</option>#}
{#                    {% endfor %}#}
{##}
                    {% if pro_name and flag == "1" or flag == "3" %}
                        <option selected>{{ pro_name }}</option>
                        {% for p in pro_obj %}
                            {% if p.project_name != pro_name %}
                            <option value="pro_name">{{ p.project_name }}</option>
                            {% endif %}
                        {% endfor %}

                        {% else %}
                        <option>请选择项目</option>
                        {% for p in pro_obj %}
                            <option value="pro_name">{{ p.project_name }}</option>
                        {% endfor %}
                    {% endif %}
                </select>
            </div>


            <div class="layui-input-inline vend">
                <select name="class2" id="vend_name" style="height: 35px;" >
{#                    <option value="">请选择厂商</option>#}
{#                    <option value="1" v-for="(vend, index) in vend_list">{[ vend]}</option>#}
                    {% if vend_name and flag == '1' or flag == "3" %}
                     <option value="" selected>{{ vend_name }}</option>

                     <option value="1" v-for="(vend, index) in vend_list" v-if="vend_name!= vend">{[ vend ]}</option>

                    {% else %}
                    <option value="">请选择厂商</option>
                    <option value="1" v-for="(vend, index) in vend_list">{[ vend ]}</option>
                    {% endif %}

                </select>
            </div>
        </div>

        <hr>
{#        <button class="layui-btn myadd" onclick="myadd(this)"><i class="layui-icon"></i>添加</button>#}
{#        <button type="button" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius myadd" onclick="myadd(this)">添加(必要文件)</button>#}


{#        <button class="layui-btn"><i class="layui-icon"></i>批量上传</button>#}
{#        <button class="layui-btn" id="sh">校验</button>#}
{#<div >#}
    {% csrf_token %}

    <table class="layui-table">
      <colgroup>
        <col width="80">
        <col width="100">
        <col width="60">
        <col width="80">
        <col width="40">
        <col width="40">
        <col width="40">
        <col width="60">
        <col width="40">
        <col width="40">

      </colgroup>

      <thead>

        <tr align="center" >
          <th><h3 style="color: blue">必要文件</h3></th>
          <th>上传文件名称</th>
          <th>文件大小(KB)</th>
{#          <th class="up_btn">上传</th>#}
          <th>状态</th>
          <th>提交备注</th>
          <th>审核备注</th>
{#          <th class="up_btn">操作</th>#}
          <th class="down_btn">下载</th>
          <th class="down_btn" style="padding: 0;text-align: center"> 审核 </th>
          <th class="down_btn">操作</th>

        </tr>

      </thead>

      <tbody id="mytr" >

            <tr v-for="(v,index) in doc_obj_all" >
              <td>{[ v.file_name ]}</td>

              <td class="p_v"><span class="p_v_name">{[ v.upload_filename ]}</span>

{#              <a :href="'/xuanxing/change_name/?f_id='+v.id" >#}
{#                  <i class="layui-icon" style="width: 2px;height: 2px;float: right" ></i>#}
{#               </a>#}
              </td>

              <td>{[ v.filesize ]}</td>
              <td class="stat_sel">


                  <div v-if="v.status== '未上传'">
                    <span >{[ v.status ]}</span>
                  </div>

                  <div v-if="v.status== '已上传'">
                    <span style="color:blue"  >{[ v.status ]}</span>
                  </div>

                  <div v-if="v.status== '审核通过'&& v.filesize">
                    <span style="color:green">{[ v.status ]} 🔵</span>
                  </div>

                  <div v-else-if="v.status== '审核通过'">
                    <span style="color:green">{[ v.status ]} ⚪</span>
                  </div>

                   <div v-if="v.status== '审核不通过'">
                    <span style="color:red">{[ v.status ]}</span>
                   </div>

                  <div v-if="v.status== '不涉及'">
                    <span style="color:blue">{[ v.status ]}</span>
                  </div>

              </td>
              <td>
                 {[ v.remark ]}

              </td>
              <td>{[ v.check_remark ]} </td>

              <td v-show="isShow" class="down_btn" style="padding: 0;text-align: center">

                  <span id="down_f" style="display: none">{[ v.id ]}</span>
                  <span id="create_time" style="display: none">{[ v.download_time ]}</span>

                  <button  type="submit" class="layui-btn layui-btn-radius layui-btn-sm "  id="download_file" onclick=download_file(this) >下载</button>
{#                  <button type="submit" class="down_btn"  id="download_file" onclick=download_file(this) >下载</button>#}
              </td>

              <td v-show="isShow" style="padding: 0;text-align: center" v-show="isShow">

                   {% csrf_token %}
                   <div v-if="v.status == '未上传'">
                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" disabled="disabled" >通过</button>
                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"   disabled="disabled" >不通过</button>
                  </div>

                  <div v-else-if="v.status != '未上传'">
                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" onclick=mypass(this) >通过</button>
                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"  onclick=no_pass(this) >不通过</button>

                  </div>

              </td>

             <td style="padding: 0;text-align: center" v-show="isShow">
                 <a :href="'/xuanxing/check_add_mark/?m_id='+v.id" >
              <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius" >+备注</button>
                 </a>
             </td>
            </tr>
      </tbody>
    </table>

{# 其他文件#}
    {% csrf_token %}
{#    <button class="layui-btn myadd" onclick="other_myadd(this)"><i class="layui-icon"></i>添加</button>#}
{#    <button type="button" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius myadd" onclick="other_myadd(this)">添加(其他文件)</button>#}

    <table class="layui-table other_f">
      <colgroup>
        <col width="80">
        <col width="100">
        <col width="60">
        <col width="80">
        <col width="40">
        <col width="40">
        <col width="40">
        <col width="60">
        <col width="40">
        <col width="40">

      </colgroup>

      <thead>
        <tr style="text-align: center" >
          <th><h3 style="color: blue">其他文件</h3></th>
          <th>上传文件名称</th>
          <th>文件大小(KB)</th>
          <th>状态</th>
          <th>提交备注</th>
          <th>审核备注</th>
          <th class="down_btn">下载</th>
          <th class="down_btn" style="padding: 0;text-align: center"> 审核 </th>
          <th class="down_btn">操作</th>

        </tr>

      </thead>

      <tbody id="mytr_pub" >

            <tr v-for="(v,index) in other_obj_all" class="other_tr">
              <td class="other_f_name">{[ v.file_name ]}</td>

              <td class="p_v"><span class="p_v_name">{[ v.upload_filename ]}</span>
                  <br>
{#              <a :href="'/xuanxing/change_name/?f_id='+v.id" >#}
{#                 <button class="layui-btn layui-btn-danger layui-btn-xs">改名</button>#}
{#               </a>#}
              </td>

              <td>{[ v.filesize ]} </td>

              <td class="other_stat_sel stat_sel">

                  <div v-if="v.status== '未上传'">
                    <span>{[ v.status ]}</span>
                  </div>

                  <div v-if="v.status== '已上传'">
                    <span style="color:blue"  >{[ v.status ]}</span>
                  </div>

                  <div v-if="v.status== '审核通过'&& v.filesize">
                    <span style="color:green">{[ v.status ]} 🔵</span>
                  </div>

                  <div v-else-if="v.status== '审核通过'">
                    <span style="color:green">{[ v.status ]} ⚪</span>
                  </div>

                   <div v-if="v.status== '审核不通过'">
                    <span style="color:red">{[ v.status ]}</span>
                   </div>

                  <div v-if="v.status== '不涉及'">
                    <span style="color:blue">{[ v.status ]}</span>
                  </div>


              </td>
              <td>{[ v.remark ]}</td>
              <td style="padding: 0;text-align: center">
                {[ v.check_remark ]}
              </td>

              <td style="padding: 0;text-align: center"  v-show="isShow">
                  <span id="other_down_f" style="display: none">{[ v.id ]}</span>
                  <span id="other_create_time" style="display: none" >{[ v.download_time ]}</span>
                  <button type="submit" class="layui-btn layui-btn-radius layui-btn-sm down_btn"  id="download_file" onclick=other_download_file(this) >下载</button>
              </td>

               <td style="padding:0;text-align: center;width: 80px;height: 80px" v-show="isShow">
{#              {% csrf_token %}#}
{#              <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" onclick=mypass(this)>通过</button>#}
{#              <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass" onclick=no_pass(this) >不通过</button>#}

                     {% csrf_token %}
                  <div v-if="v.status == '未上传'">
                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" disabled="disabled" >通过</button>

                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"   disabled="disabled" >不通过</button>

                  </div>

                   <div v-else-if="v.status != '未上传'">
                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" onclick=mypass(this) >通过</button>

                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"  onclick=no_pass(this) >不通过</button>

                  </div>

              </td>

                <td style="padding: 0;text-align: center" v-show="isShow">
                    <a :href="'/xuanxing/check_add_mark/?m_id='+v.id" >
                      <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius">+备注</button>
                    </a>
               </td>
            </tr>
      </tbody>
    </table>

 </div>

{#公共文件 #}

<div id="pub_file"  style="display: none">
         <h1 style="display: inline-block">公共文件:</h1>


        <span id="pub_myflag" style="display: none">{{ flag }}</span>
        <div class="layui-input-inline pub_sel">

            <select id="pub_pro_name" name="pub_pro_name" class="" style="height: 35px;">
{#                <option value="">请选择项目</option>#}
{#                {% for pro in pro_obj %}#}
{#                <option value="{{ pro.id }}">{{ pro.project_name }}</option>#}
{#                {% endfor %}#}
                     {% if pro_name and flag == "2" %}
                     <option selected>{{ pro_name }}</option>
                     {% for p in pro_obj %}
                        {% if p.project_name != pro_name %}
                        <option value="pro_name">{{ p.project_name }}</option>
                        {% endif %}
                    {% endfor %}

                    {% else %}
                    <option value="">请选择项目</option>
                    {% for pro in pro_obj %}
                    <option value="{{ pro.id }}">{{ pro.project_name }}</option>
                    {% endfor %}
                {% endif %}
            </select>
        </div>


        <hr>

{#    <button class="layui-btn myadd" onclick="pub_myadd(this)"><i class="layui-icon"></i>添加</button>#}
{#    <button type="button" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius myadd" onclick="pub_myadd(this)">添加(公共文件)</button>#}

    <div id="mypub">
        {% csrf_token %}
         <table class="layui-table" >

          <colgroup>
                <col width="80">
                <col width="100">
                <col width="60">
                <col width="80">
                <col width="40">
                <col width="40">
                <col width="40">
                <col width="60">
                <col width="40">
                <col width="40">
              </colgroup>
          <thead>

        <tr>
          <th><h3 style="color: blue">公共文件</h3></th>
          <th>上传文件名称</th>
          <th>文件大小(KB)</th>
{#          <th class="up_btn">上传</th>#}
          <th>状态</th>
          <th>提交备注</th>
          <th>审核备注</th>
          <th class="down_btn">下载</th>
          <th class="down_btn" style="padding: 0;text-align: center"> 审核 </th>
          <th class="down_btn">操作</th>
        </tr>

          </thead>

           <tbody id="ps_table" >

            <tr v-for="(v,index) in pub_obj_all">
              <td>{[ v.file_name ]}</td>

              <td class="p_v"><span class="p_v_name">{[ v.upload_filename ]}</span>

              </td>

              <td>{[ v.filesize ]}</td>

              <td class="stat_sel">
{#                {[ v.status ]}#}
                  <div v-if="v.status== '未上传'">
                    <span >{[ v.status ]}</span>
                  </div>

                  <div v-if="v.status== '已上传'">
                    <span style="color:blue"  >{[ v.status ]}</span>
                  </div>

                  <div v-if="v.status== '审核通过'&& v.filesize">
                    <span style="color:green">{[ v.status ]} 🔵</span>
                  </div>

                  <div v-else-if="v.status== '审核通过'">
                    <span style="color:green">{[ v.status ]} ⚪</span>
                  </div>

                   <div v-if="v.status== '审核不通过'">
                    <span style="color:red">{[ v.status ]}</span>
                   </div>

                  <div v-if="v.status== '不涉及'">
                    <span style="color:blue">{[ v.status ]}</span>
                  </div>

              </td>
              <td>
              {[ v.remark ]}

              </td>
              <td>{[ v.check_remark ]}</td>
              <td style="padding: 0;text-align: center" v-show="isShow">
                  {% csrf_token %}
                  <span id="down_pub" style="display: none">{[ v.id ]}</span>
                  <span id="pub_create_time" style="display: none">{[ v.download_time ]}</span>
                  <button  type="submit" class="layui-btn layui-btn-radius layui-btn-sm download_file down_pub down_btn"  onclick=download_pub(this)>下载</button>
              </td>

              <td style="padding:0;text-align: center;width: 80px;height: 80px" v-show="isShow">
                    {% csrf_token %}
                  <div v-if="v.status == '未上传'">
                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" disabled="disabled" >通过</button>

                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"   disabled="disabled">不通过</button>

                  </div>

                   <div v-else-if="v.status != '未上传'">
                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" onclick=mypass(this)>通过</button>

                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"  onclick=no_pass(this)>不通过</button>

                  </div>

              </td>

              <td style="padding: 0;text-align: center" v-show="isShow">
                    <a :href="'/xuanxing/check_add_mark/?m_id='+v.id" >
                      <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius">+备注</button>
                    </a>
              </td>

            </tr>
      </tbody>
    </table>

</div>

  {# 会议纪要#}
<h2>会议纪要</h2>
    <div id="pub_jy">
     <table class="layui-table" >

              <colgroup>
                    <col width="70">
                    <col width="80">
                    <col width="60">
                    <col width="60">
                    <col width="100">
                    <col width="60">
                    <col width="60">
                    <col width="60">
                    <col width="10">
              </colgroup>

              <thead>
                <tr>
                  <th>类型</th>
                  <th>文件名称 </th>
                  <th>上传时间</th>
                  <th>状态</th>
                  <th>上传备注</th>
                  <th>下载备注</th>
                  <th style="padding: 0;text-align: center">下载</th>
                  <th style="padding: 0;text-align: center">审核</th>
                  <th style="padding: 0;text-align: center">操作</th>

                </tr>
              </thead>

               <tbody id="jy_table" >
    {#            {% for j in pd_list %}#}
                <tr v-for ="(j,index) in pd_list">
                  <td >{[ j.type ]}</td>
                  <td>{[ j.file_name ]}</td>

                  <td>{[ j.up_time ]}</td>

                  <td class="stat_sel">
                      <div v-if="j.status== '未上传'">
                        <span >{[ j.status ]}</span>
                      </div>

                      <div v-if="j.status== '已上传'">
                        <span style="color:blue"  >{[ j.status ]}</span>
                      </div>

                      <div v-if="j.status== '审核通过'">
                        <span style="color:green">{[ j.status ]}</span>
                      </div>

                       <div v-if="j.status== '审核不通过'">
                        <span style="color:red">{[ j.status ]}</span>
                       </div>

                      <div v-if="j.status== '不涉及'">
                        <span style="color:blue">{[ j.status ]}</span>
                      </div>

                  </td>
                  <td>{[ j.mark ]}</td>
                  <td>{[ j.check_mark ]}</td>
                  <td style="padding: 0;text-align: center">
                      <span id="down_jy" style="display: none">{[ j.id ]}</span>
                      <span id="jy_create_time" style="display: none">{[ j.download_time ]}</span>
                  <button  type="submit" class="layui-btn layui-btn-radius layui-btn-sm download_file down_jy"  onclick=download_jy(this)>下载</button>
                  </td>
                  <td style="padding: 0;text-align: center">
{#                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" onclick=mypass(this)>通过</button>#}
{#                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"  onclick=no_pass(this)>不通过</button>#}

                  {% csrf_token %}
                  <div v-if="j.status == '未上传'">
                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" disabled="disabled" >通过</button>
                  <button style="background: #9F9F9F" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass"   disabled="disabled">不通过</button>

                  </div>

                  <div v-else-if="j.status != '未上传'">

                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius mypass" onclick=mypass(this)>通过</button>
                  <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius no_pass" onclick=no_pass(this)>不通过</button>

                  </div>

                  </td>
                <td style="padding: 0;text-align: center">
                 <a :href="'/xuanxing/jy_add_mark/?m_id='+j.id">
                      <button class="layui-btn layui-btn-normal layui-btn-xs layui-btn-radius">+备注</button>
                 </a>
                </td>
                </tr>
    {#           {% endfor %}#}
          </tbody>
        </table>
    </div>
</div>



{#  直观图展示界面  #}

    <div id="sel" style="display: none">

{#      <div  style="width: 700px;height:500px;display: inline-block"> <span id="char">按钮  </span></div>#}
        <div v-for="(k,index) in shape_list" id="sp" >
           <span id="shape_sp"> {[ k ]}</span>
{#        <div id="myechart" style="width: 700px;height:500px;display: inline-block"  ></div>#}
{#        <div id="myechart1" style="width: 700px;height:500px;display: inline-block"> </div>#}
        </div>
        <div id="myechart" style="width: 900px;height:500px;display: inline-block"  ></div>
    </div>

</div>


<script src="/static/layui2/layui.js"></script>
<script src="/static/layui2/layui.all.js"></script>
<script type="text/javascript">

 {# 权限#}
 {# $(function () {#}
 {#     let opt_type_str = '{{ request.session.opt_type_list}}';#}
 {#     opt_type_str = opt_type_str.split(";");#}
 {#     console.log(opt_type_str);#}
 {#     let doc_up = $.inArray("文档提交", opt_type_str); //判断菜单名是否在数组中#}
 {#     let doc_check = $.inArray("文档审核", opt_type_str); //判断菜单名是否在数组中#}
 {#     console.log(doc_up);#}
 {#     console.log(doc_check);#}
 {##}
 {#       if ( doc_up != -1 ) {#}
 {#           $(".down_btn").each(function () {#}
 {#               console.log(666888);#}
 {#               $(this).hide();#}
 {#               v_hide();#}
 {#               v_hide_pub();#}
 {#               v_hide_p();#}
 {#           });#}
 {#        }#}
 {##}
 {#        if ( doc_check != -1 ) {#}
 {#            console.log(99999);#}
 {#           $(".up_btn").each(function () {#}
 {#               $(this).hide();#}
 {#               v_show();#}
 {#               v_show_pub();#}
 {#               v_show_p()#}
 {#           });#}
 {#        }#}
 {#    });#}


{# vue#}
      let pro_vue = new Vue({
        delimiters: ['{[', ']}'],
        el: "#select_prod",
        data: {
            vend_list: [],
        }
    });
      let pro1_vue = new Vue({
        delimiters: ['{[', ']}'],
        el: "#mytr",
        data: {
            doc_obj_all: {},

            doc_li: [],
            isShow: true,
            isUp:true,

        },
         mounted () {
            window.v_hide = this.v_hide;    // 方法赋值给window
            window.v_show = this.v_show;    // 方法赋值给window
         },

         methods:{
             v_show(){
                this.isUp=false;
             },
            v_hide(){
                this.isShow=false;
             },



        },
    });

     let pro_vue_pub = new Vue({
        delimiters: ['{[', ']}'],
        el: "#mytr_pub",
        data: {

            other_obj_all:{},
            doc_li:[],
             isShow: true,
             isUp:true,
        },
        mounted () {
            window.v_hide_pub = this.v_hide_pub;    // 方法赋值给window
            window.v_show_pub = this.v_show_pub;
         },

         methods: {
             v_hide_pub() {
                 this.isShow = false;
             },

             v_show_pub() {
                 this.isUp = false;
             }
         }

    });
     let pub_vue = new Vue({
        delimiters: ['{[', ']}'],
        el: "#mypub",
        data: {
            pub_obj_all:{},
            pd_list:{},
            isShow: true,
            isUp:true,
        },

       mounted () {
            window.v_hide_p = this.v_hide_p;    // 方法赋值给window
            window.v_show_p = this.v_show_p;    // 方法赋值给window
         },

         methods: {
             v_hide_p() {
                 this.isShow = false;
             },
             v_show_p() {
                 this.isUp = false;
             }
         }


    });
     let pub_vue_jy = new Vue({
        delimiters: ['{[', ']}'],
        el: "#pub_jy",
        data: {
            pub_obj_all:{},
            pd_list:{}
        },
    });
      let shape = new Vue({
        delimiters: ['{[', ']}'],
        el: "#sel",
        data: {
            shape_list:[],
        },
    });

      function liandong(opt_name,pro_name,vend_name) {
        {#let form = layui.form;#}
        if (pro_name !== opt_name) {
            $.ajax({
                url: '/xuanxing/get_ven_c/',
                type: 'post',
                data: {
                    "csrfmiddlewaretoken": '{{ csrf_token }}',
                    "pro_name": pro_name,
                    "vend_name": vend_name,
                    "flag":1,
                },
                success: function (msg) {
                    let ReState = eval("(" + JSON.stringify(msg) + ")");
                    {#let ReState = msg;#}
                    if (ReState["code"] == "0000") {

                        pro_vue.$set(pro_vue, "vend_list", {});
                        pro_vue.$set(pro_vue, "vend_list", ReState["vend_list"]);
                        pro1_vue.$set(pro1_vue, "doc_obj_all", {});
                        pro1_vue.$set(pro1_vue, "doc_obj_all", ReState["doc_obj_all"]);

                        {#var ess = ReState["doc_obj_all"];#}
                        {#console.log(ess);#}
                        {#for (var i = 0; i < ess.length; i++) {#}
                        {#console.log(ess[i],9); //#}
                        {# }#}
                     }
                }
            });
        }
    }

     function liandong_other(opt_name,pro_name,vend_name) {
        let form = layui.form;
        if (pro_name !== opt_name) {
            $.ajax({
                url: '/xuanxing/get_ven_other_c/',
                type: 'post',
                data: {
                    "csrfmiddlewaretoken": '{{ csrf_token }}',
                    "pro_name": pro_name,
                    "vend_name": vend_name,
                    "flag":3,
                },
                success: function (msg) {
                    let ReState = eval("(" + JSON.stringify(msg) + ")");

                    if (ReState["code"] == "0000") {

                        pro_vue.$set(pro_vue, "vend_list", {});
                        pro_vue.$set(pro_vue, "vend_list", ReState["vend_list"]);
                        pro_vue_pub.$set(pro_vue_pub, "other_obj_all",{});
                        pro_vue_pub.$set(pro_vue_pub, "other_obj_all", ReState["other_obj_all"]);


                        {#var ess = ReState["other_obj_all"];#}
                        {#console.log(ess,888);#}

                     }
                }
            });
        }
     }


      let pro_name = $("#pro_name").find("option:selected").text();
      let vend_name = $("#vend_name").find("option:selected").text();
      if (pro_name && vend_name){
            console.log(pro_name,vend_name,"****c****");
            liandong("请选择项目",pro_name, vend_name);
            liandong_other("请选择项目",pro_name, vend_name);
        }



    $("#pro_name").bind("change", function () {
        let pro_name = $(this).find("option:selected").text();
        liandong("请选择项目",pro_name, "");
        liandong_other("请选择项目",pro_name, "");
        $("#vend_name")[0].selectedIndex=0;
    });

    $("#vend_name").bind("change", function () {

        let pro_name = $("#pro_name").find("option:selected").text();
        let vend_name = $(this).find("option:selected").text();

        liandong("请选择项目",pro_name, "");
        liandong("请选择厂商", pro_name, vend_name);
        liandong_other("请选择项目",pro_name, "");
        liandong_other("请选择厂商", pro_name, vend_name);

    });


    {#点击按钮实现三个页面的跳转#}
    $(function () {
        $("#ess_button").click(function () {

            $("#ess_file").show();
            $("#pub_file").hide();
            {#$("#mymain").hide();#}
            $("#bar").hide();
            $("#other_file").show();
            $("#sel").hide();


        });

        $("#ret").click(function () {

             $("#ess_file").hide();
             {#$("#mymain").show();#}
             {#$("#mymain").hide();#}
             $("#bar").show();
             $("#pub_file").hide();
             $("#other_file").hide();
             $("#sel").show();

            $.ajax({
                url: '/xuanxing/shape_show/',
                type: 'post',
                data: {
                    "csrfmiddlewaretoken": '{{ csrf_token }}',
                    {#"pro_name": pro_name,#}
                    {#"vend_name": vend_name,#}
                    "flag":1,
                },
                success: function (shape_list) {
                    let ReState = eval("(" + JSON.stringify(shape_list) + ")");
                    {#console.log(shape_list,666666);#}
                    {#var shape=shape_list;#}
                    {# for(var key in shape){  // 自定义变量,存储索引 0 1 2 3 4 ....#}
                    {#    console.log(shape[key][1].name);   // arr[key] 就是索引对应的数据#}
                        {#console.log(shape[key]);   // arr[key] 就是索引对应的数据#}
                        {#console.log(key);   // arr[key] 就是索引对应的数据#}
                    {#  }#}


                    {#$("#char").html(shape_list,33);#}
                    {#alert(shape_list);#}
                    {#$("#char").append(shape_list);#}
                     shape.$set(shape, "shape_list", ReState["shape_list"]);
                }
             });
        });

       let myflag = $("#pub_myflag").html();
       console.log(myflag,"=====myflag");
       if (myflag == "2"){
           $("#ess_file").hide();
           $("#pub_file").show();
           $("#other_file").hide();
       }



        $("#pub_button").click(function () {
             $("#ess_file").hide();
             {#$("#mymain").hide();#}
             $("#bar").hide();
             $("#pub_file").show();
             $("#other_file").hide();
             $("#sel").hide();

        });
   });



   {#厂商必要文件下载#}
    function download_file(down_obj){
         var file_id =$(down_obj).siblings("#down_f").text();
         var down_o=$(down_obj);
         $.ajax({
             url: "/xuanxing/download_file/",
             type: "post",
             {#contentType: false,#}
             async:true,
             data: {
                 "csrfmiddlewaretoken": "{{ csrf_token }}",
                 "file_id":file_id,
                 "flag":1,
             },
             {#cache: false,#}
             success: function (ret_data) {
                var file_path = ret_data.f_path;
                {#把下载的文件时间传给通过，不通过按钮，隐藏到下载框里#}
                var ctime = ret_data.ctime;
                $(down_o).siblings("#create_time").html(ctime);

                location.href = "/xuanxing/down_load/?file_path="+file_path;
             }
        })
    }


    function mypass(ps) {

        var ps_obj=$(ps);
        var pass_id = $(ps).parent().parent().prev().children("#down_f").html();
        var pass_ctime = $(ps).parent().parent().prev().children("#create_time").html();
        console.log(pass_id,"必要文件id");
        console.log(pass_ctime,"必要文件pass_ctime");
        var pass_other_id = $(ps).parent().parent().prev().children("#other_down_f").html();
        var pass_other_ctime = $(ps).parent().parent().prev().children("#other_create_time").html();
        console.log(pass_other_ctime,"其他文件pass_ctime");
        var pass_pub_id = $(ps).parent().parent().prev().children("#down_pub").html();
        var pass_pub_ctime = $(ps).parent().parent().prev().children("#pub_create_time").html();
        var pass_jy_id = $(ps).parent().parent().prev().children("#down_jy").html();
        var pass_jy_ctime = $(ps).parent().parent().prev().children("#jy_create_time").html();

        console.log( pass_jy_id,"pass_jy_id 纪要id");
        $.ajax({
            url:"/xuanxing/check_pass/",
            type:"post",
            {#contentType: false,#}
            data:{
                "csrfmiddlewaretoken": "{{ csrf_token }}",
                "pass_id":pass_id,
                "pass_ctime":pass_ctime,
                "pass_other_id":pass_other_id,
                "pass_other_ctime":pass_other_ctime,
                "pass_pub_id":pass_pub_id,
                "pass_pub_ctime":pass_pub_ctime,
                "pass_jy_id":pass_jy_id,
                "pass_jy_ctime":pass_jy_ctime,
            },

            success: function (ret) {
                {#let ReState = eval("(" + JSON.stringify(msg) + ")");#}
                let Ret = ret;
                if (Ret["status"] == "3") {
                    $(ps_obj).parent().parent().siblings(".stat_sel").children("div").html("<span style='color:green'>"+"审核通过"+"</span>");
                    layer.msg("'通过'设置成功！")
                }
                if (Ret["code"] == "0001") {

                    {#$(ps_obj).parent().parent().siblings(".stat_sel").children("div").html("<span style='color:green'>"+"审核通过"+"</span>");#}
                    layer.msg("文件已更新，请重新下载！")
                }
               }
             });
           }


    function no_pass(nps) {

        var nps_obj = $(nps);
        var pass_id = $(nps).parent().parent().prev().children("#down_f").html();

        var pass_ctime = $(nps).parent().parent().prev().children("#create_time").html();

        var pass_other_id = $(nps).parent().parent().prev().children("#other_down_f").html();
        var pass_other_ctime = $(nps).parent().parent().prev().children("#other_create_time").html();

        console.log(pass_other_id);
        var pass_pub_id = $(nps).parent().parent().prev().children("#down_pub").html();
        var pass_pub_ctime = $(nps).parent().parent().prev().children("#pub_create_time").html();
        var pass_jy_id = $(nps).parent().parent().prev().children("#down_jy").html();
         var pass_jy_ctime = $(nps).parent().parent().prev().children("#jy_create_time").html();

        $.ajax({
            url: "/xuanxing/no_check_pass/",
            type: "post",
            {#contentType: false,#}
            data: {
                "csrfmiddlewaretoken": "{{ csrf_token }}",
                "pass_id": pass_id,
                "pass_ctime":pass_ctime,
                "pass_other_id": pass_other_id,
                "pass_other_ctime":pass_other_ctime,
                "pass_pub_id": pass_pub_id,
                "pass_pub_ctime":pass_pub_ctime,
                "pass_jy_id":pass_jy_id,
                "pass_jy_ctime":pass_jy_ctime,
            },

            success: function (ret) {
                {#let ReState = eval("(" + JSON.stringify(msg) + ")");#}
                let Ret = ret;
                if (Ret["code"] == "0000") {
                    {#layer.ret("审核成功");#}
                    $(nps_obj).parent().parent().siblings(".stat_sel").html("<span style='color:red'>"+"审核不通过"+"</span>");
                    layer.msg("'不通过'设置成功！")
                }

              if (Ret["code"] == "0001") {
                    layer.msg("文件已更新，请重新下载！")
                }

            }
        });
    }




    {#厂商其他文件上传#}

    {#var other_up_name="";#}
    {#function other_myinput(obj) {#}
    {#    up_name= obj.files[0].name;   //要上传文件的名字#}
    {#    console.log(up_name,"-------up_name");#}
    {#    var mysize = $(obj).parent().prev().html((obj.files[0].size/1024).toFixed(0));  // 把文件大小写入对应表格里#}
    {#    var myname = $(obj).parent().prev().prev().html((obj.files[0].name));  // 把文件名字写入对应表格里#}
    {# }#}
    {##}
    {#var ot="";#}
    {#function other_myclick(other_up_obj){#}
    {#    var ot=$(other_up_obj).val();#}
    {#    let formdata = new FormData();#}
    {#    formdata.append('myfile', $('.other_myfile')[ot].files[0],f_code);#}
    {#    var f_code=$(other_up_obj).parent().siblings(".other_f_name").html();#}
    {#    var other_vend_name=$(other_up_obj).siblings("#other_vend_name").html();#}
    {#    var other_pro_name=$(other_up_obj).siblings("#other_pro_name").html();#}
    {##}
    {#    formdata.append('f_code', f_code);#}
    {#    formdata.append('other_vend_name', other_vend_name);#}
    {#    formdata.append('other_pro_name', other_pro_name);#}
    {#    formdata.append('flag', 3);#}
    {#    formdata.append('csrfmiddlewaretoken', '{{ csrf_token }}');#}
    {##}
    {#    var other_up=$(other_up_obj);#}
    {#    $.ajax({#}
    {#        url:"/xuanxing/upload_file/",#}
    {#        type:"post",#}
    {#        contentType: false,#}
    {#        // 不设置请求体数据格式类型#}
    {#        // 不处理数据，直接源数据发送#}
    {#        processData: false,#}
    {#        data:formdata,#}
    {#        cache:false,#}
    {#        async:false,#}
    {#        success: function (ret) {#}
                {#let ReState = eval("(" + JSON.stringify(msg) + ")");#}
    {#            let Ret = ret;#}
    {##}
    {#            if (Ret["code"] == "0000") {#}
    {#                layer.msg("上传成功")#}
    {#            }#}
    {##}
    {#            if (Ret["stat_obj"] == 2) {#}
    {#                 $(other_up).parent().siblings(".other_stat_sel").html("已上传");#}
    {#            }#}
    {#           }#}
    {#         });#}
    {#       }#}

        {#厂商其他文件下载#}
    {#厂商必要文件下载#}
    function other_download_file(down_obj){
         var file_id =$(down_obj).siblings("#other_down_f").text();
         var down_other = $(down_obj);
         $.ajax({
             url: "/xuanxing/download_file/",
             type: "post",
             {#contentType: false,#}
             {#processData: false,#}
             async:true,
             data: {
                 "csrfmiddlewaretoken": "{{ csrf_token }}",
                 "file_id":file_id,
                 "flag":3,
             },
             {#cache: false,#}
             success: function (ret_data) {
                var file_path = ret_data.f_path;
                {#var file_name = ret_data.file_name;#}
                 var ctime = ret_data.ctime;
                 $(down_other).siblings("#other_create_time").html(ctime);

                location.href = "/xuanxing/down_load/?file_path="+file_path;
             }
        })
    }


{#厂商必要文件添加动作#}

    {#function myadd(add){#}
    {#    var  pro_add = $(add).siblings("#select_prod").children(".pro").find("option:selected").html();#}
    {#    console.log(pro_add);#}
    {#    var  vend_add = $(add).siblings("#select_prod").children(".vend").find("option:selected").html();#}
    {#    console.log(vend_add);#}
    {#    var flag=1;#}
    {#    location.href = "/xuanxing/doc_add?pro_add="+pro_add+"&"+"vend_add="+vend_add+"&"+"flag="+flag;#}
    {#   }#}


{#  厂商其他文件添加  #}
{#    function other_myadd(add){#}
{#        var  pro_add = $(add).siblings("#select_prod").children(".pro").find("option:selected").html();#}
{#        console.log(pro_add,77);#}
{#        var vend_add = $(add).siblings("#select_prod").children(".vend").find("option:selected").html();#}
{#        console.log(vend_add,88);#}
{#        var flag=3;#}
{#        location.href = "/xuanxing/doc_add?pro_add="+pro_add+"&"+"vend_add="+vend_add+"&"+"flag="+flag;#}
{#       }#}


{#  公共文件 #}
    function pub(opt_name,pub_pro_name) {
        {#let form = layui.form;#}
        if (pub_pro_name !== opt_name) {
            $.ajax({
                url: '/xuanxing/get_pub/',
                type: 'post',
                data: {
                    "csrfmiddlewaretoken": "{{ csrf_token }}",
                    "pub_pro_name": pub_pro_name,
                    "flag":2,
                },
                success: function (msg) {
                    let ReState = eval("(" + JSON.stringify(msg) + ")");
                    {#let ReState = msg;#}
                    if (ReState["code"] == "0000") {
                        pub_vue.$set(pub_vue, "pub_obj_all", ReState["pub_obj_all"]);
                        pub_vue_jy .$set(pub_vue_jy , "pd_list", ReState["pd_list"]);
                     }
                }
            });
        }
    }

        {#let pub_pro_name =$("#pub_pro_name").find("option:selected").text();#}
        {#if (pub_pro_name){#}
        {#     console.log(pub_pro_name,"*************");#}
        {#     pub("请选择项目",pub_pro_name);#}
        {##}
        {# }#}


     $("#pub_pro_name").bind("change", function () {
            let pro_name = $(this).find("option:selected").text();
            pub("请选择项目",pro_name);


     });


   {# 公共添加页面#}
   {#function pub_myadd(add){#}
   {#     var  pro_add = $(add).siblings(".pub_sel").find("option:selected").html();#}
   {#     console.log(pro_add);#}
   {#     var flag = 2;#}
   {#     location.href = "/xuanxing/doc_add?pro_add="+pro_add+"&"+"flag="+flag;#}
   {#    }#}


{#  pub 下载#}
     function download_pub(down_obj){
         var file_id =$(down_obj).siblings("#down_pub").text();
         var down_pub=$(down_obj);
         $.ajax({
             url: "/xuanxing/download_file/",
             type: "post",
             {#contentType: false,#}
             {#processData: false,#}
             async:true,
             data: {
                 "csrfmiddlewaretoken": "{{ csrf_token }}",
                 "file_id":file_id,
                 "flag":2,
             },
             {#cache: false,#}
             success: function (ret_data) {
                var file_path = ret_data.f_path;
                {#var file_name = ret_data.file_name;#}
                var ctime = ret_data.ctime;
                $(down_pub).siblings("#pub_create_time").html(ctime);
                location.href = "/xuanxing/down_load/?file_path="+file_path;
             }
        })
    }


     {#文件纪要下载#}
     function download_jy(down_obj){
         var file_id =$(down_obj).siblings("#down_jy").text();
         console.log(file_id,"file_id==纪要======");
        var down_jy=$(down_obj);
         $.ajax({
             url: "/xuanxing/download_file_jy/",
             type: "post",
             {#contentType: false,#}
             {#processData: false,#}
             async:true,
             data: {
                 "csrfmiddlewaretoken": "{{ csrf_token }}",
                 "file_id":file_id,

             },
             {#cache: false,#}
             success: function (ret_data) {
                var file_path = ret_data.f_path;
                {#var file_name = ret_data.file_name;#}
                var ctime = ret_data.ctime;
                console.log(ctime,"jyctime" );
                $(down_jy).siblings("#jy_create_time").html(ctime);
                location.href = "/xuanxing/down_load_jy/?file_path="+file_path;
             }
        })
    }



    {#接收后端的值#}
    {#var kv = new Array();//声明一个新的字典#}
    {#kv = {{ shape_list|safe }};//取出后台传递的数据，此处添加safe过滤避免警告#}
    {#var test = new Array();//声明一个新的字典用于存放数据#}
    {#for (var logKey in kv) {#}
    {#//将对应键值对取出存入test，logKey 为该字典的键#}
    {#  test.push({value: kv[logKey], name: logKey});#}
     {# }#}


   // 基于准备好的dom，初始化echarts实例
  {#var data =  $("#sp").html();#}
  {# console.log(data,888999);#}
   var myChart = echarts.init(document.getElementById('myechart'));
   {#var data = document.getElementById('sel').html();#}
   {# var data =  $("#sp").html();#}
   {#console.log(data,888);#}
{#        myChart.setOption({#}
{#        series : [#}
{#        {#}
{#            name: '访问来源',#}
{#            type: 'pie',    // 设置图表类型为饼图#}
{#            radius: '65%',  // 饼图的半径，外半径为可视区尺寸（容器高宽中较小一项）的 55% 长度。#}
            {#data:[          // 数据数组，name 为数据项名称，value 为数据项值#}
            {#    {value:235, name:'公司营业执照'},#}
            {#    {value:274, name:'法人代表授权书'},#}
            {#    {value:310, name:'公司承诺与声明'},#}
            {#    {value:335, name:'参测产品承诺书'},#}
            {#    {value:400, name:'公司承诺书'}#}
            {##}
            {#]#}
            {#data:shape_list,#}
            {#data: data,#}
{#        }#}
{#    ]#}
{# });#}


       {#var myChart1 = echarts.init(document.getElementById('bar'));#}

        // 指定图表的配置项和数据
        {#var option = {#}
        {#    title: {#}
        {#        text: '资料核对'#}
        {#    },#}
        {#    tooltip: {},#}
        {#    legend: {#}
        {#        data:['数量']#}
        {#    },#}
        {#    xAxis: {#}
        {#        data: ["联想","百度","惠普","小米","戴尔","宏基"]#}
        {#    },#}
        {#    yAxis: {},#}
        {#    series: [{#}
        {#        name: '数量',#}
        {#        type: 'bar',#}
        {#        data: [2, 5, 8, 10, 7, 15]#}
        {#    }]#}
        {# };#}



  var option = {
    tooltip: {
        trigger: 'axis',
        axisPointer: {            // 坐标轴指示器，坐标轴触发有效
            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        }
    },
    legend: {
        data: ['未上传', '已上传', '审核通过', '审核不通过', '不涉及文件']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '2%',
        containLabel: true
     },


    xAxis: [
        {
            type: 'category',
            data: ['数据库', '桌面PC', '系统运维', '一体化', '云视频']
        }
    ],
    yAxis: [
        {
            type: 'value',
            name: '文件状态数量',
            min: 0,
            max: 40,
            position: 'left',
            {#offset: 1,#}
             boundaryGap: true,
                    axisLine : {
                        show: true,
                        lineStyle: {
                            color: 'green',
                            type: 'solid',
                            width: 2,
                        }
                    },
             }
        ],
    series: [

         {
            name: '未上传',
            type: 'bar',
             barWidth: 25,
            stack: '其他文件',
            data: [3, 2, 1, 7, 2, 3, 2]
        },
        {
            name: '已上传',
            type: 'bar',

            stack: '其他文件',
            data: [2, 8, 1, 6, 3, 3, 2]
        },
        {
            name: '审核通过',
            type: 'bar',
            stack: '其他文件',
            data: [12, 6, 1, 4, 9, 3, 8]
        },
        {
            name: '审核不通过',
            type: 'bar',
            stack: '其他文件',
            data: [5, 2, 7, 5, 3, 3, 10]
        },

         {
            name: '不涉及文件',
            type: 'bar',
            stack: '其他文件',
            data: [5, 2, 2, 5, 9, 3, 10]
        },

         {#必要文件#}
         {
            name: '未上传',
            type: 'bar',
            barWidth: 25,
            stack: '必要文件',
            data: [3, 6, 1, 7, 2, 3, 2]
        },
        {
            name: '已上传',
            type: 'bar',
            stack: '必要文件',
            data: [12, 12, 1, 1, 3, 3, 2]
        },
        {
            name: '审核通过',
            type: 'bar',
            stack: '必要文件',
            data: [2, 6, 11, 4, 9, 10, 8]
        },
        {
            name: '审核不通过',
            type: 'bar',
            stack: '必要文件',
            data: [5, 2, 9, 5, 10, 3, 10]
        },

         {
            name: '不涉及文件',
            type: 'bar',
            stack: '必要文件',
            data: [5, 2, 2, 5, 9, 3, 10]
        },

    ]
};
 myChart.setOption(option)

</script>

</body>

</html>



